<!DOCTYPE html>
<html>

<head>
    ﻿  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Use your own MongoDB Instance</title>
  <meta name="description" content="Tableau log file analysis utility.">

  <link rel="shortcut icon" type="image/png" href="/Logshark/assets/logo.png">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <link rel="stylesheet" href="/Logshark/css/main.css">
  <link rel="stylesheet" href="/Logshark/css/github-highlight.css">

  <script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

</head>

<body>
    <div class="container">
        <header class="site-header">
  <div class="wrapper">
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand navbar-brand-logo" href="/Logshark/#">Logshark <img src="/Logshark/assets/Logshark.ico" alt="Logshark" class="logo" /></a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a target="_blank" href="https://community.tableau.com/community/forums/server-administration/content">Forum</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li class="tableauIcon"><a target="_blank" href="http://tableau.com"><img src="/Logshark/assets/logo.png" alt="Tableau Developers" class="logo" /></a></li>
            <li><a target="_blank" href="https://github.com/tableau/logshark"><span class="icon icon--github" title="Tableau Logshark" alt="Tableau Logshark"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span></a></li>
          </ul>
        </div>
      </div>
    </nav>
  </div>
</header>

        ﻿<div class="well docs-menu col-xs-12 col-sm-4 col-md-3">
    <ul class="nav nav-list">
        <li class="nav-header">Get Started</li>
        <li>
            <a href="/Logshark/docs">Logshark Installation and User Guide</a>
        </li>
        <li>
            <a href="/Logshark/docs/logshark_prefunc">Get your computer set up for Logshark</a>
        </li>
        <li>
            <a href="/Logshark/docs/logshark_postgres">Install and Configure PostgresSQL</a>
        </li>
        <li>
            <a href="/Logshark/docs/logshark_install">Install and Configure Logshark</a>
        </li>

        <li class="nav-header">Use Logshark</li>
        <li>
            <a href="/Logshark/docs/logshark_run">Run Logshark and View the Results</a>
        </li>
       
        <li class="nav-header">Logshark Reference</li>
        <li>
            <a href="/Logshark/docs/logshark_cmds">Logshark Command Options</a>
        </li>
        <li>
            <a href="/Logshark/docs/logshark_plugins">Logshark Plugins and Generated Workbooks</a>
        </li>
        <li>
            <a href="/Logshark/docs/logshark_customwbk">Add Custom Workbooks</a>
        </li>
        <li>
            <a href="/Logshark/docs/logshark_mongo">Use your own MongoDB Instance</a>
        </li>
        <li>
            <a href="/Logshark/docs/logshark_remove">Uninstall Logshark</a>
        </li>
    </ul>
</div>

        <div class="content .col-xs-12 .col-sm-8 .col-md-9">
            <h1>Use your own MongoDB Instance</h1>
            <div class="edit-container">
                <a href="https://github.com/tableau/logshark/edit/master/docs/logshark_mongo.md" class="edit-links"><span class="glyphicon glyphicon-pencil"></span> Edit this page</a>
                &nbsp;
                <a href="https://github.com/tableau/logshark/issues" class="edit-links"><span class="glyphicon glyphicon-flag"></span> Submit an issue</a>
            </div>
            <br />
            <p>If you have log files that are larger than 2 GB, you should install and set up your own MongoDB Community server. Download it from <a href="https://www.mongodb.com/download-center">https://www.mongodb.com/download-center#community.
</a></p>

<p>If you install your own MongoDB, you must configure Logshark to use your MongoDB instance by editing the Logshark configuration file, <em>&lt;Logshark_install_location&gt;</em><code class="highlighter-rouge">\config\Logshark.config</code>.</p>

<p>The Logshark.config file contains the <code class="highlighter-rouge">&lt;MongoConnection&gt;</code> element that sets the options for the MongoDB that Logshark uses to store the BSON documents extracted from the archive (zipped logs).</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code>  <span class="nt">&lt;MongoConnection</span> <span class="na">poolSize=</span><span class="s">"200"</span> <span class="na">timeout=</span><span class="s">"60"</span> <span class="na">insertionRetries=</span><span class="s">"3"</span><span class="nt">&gt;</span> 
    <span class="nt">&lt;Server</span> <span class="na">address=</span><span class="s">"logshark-mongo-prod"</span> <span class="na">port=</span><span class="s">"27000"</span><span class="nt">/&gt;</span> 
    <span class="nt">&lt;User</span> <span class="na">username=</span><span class="s">"logshark"</span> <span class="na">password=</span><span class="s">"logshark"</span><span class="nt">/&gt;</span> 
  <span class="nt">&lt;/MongoConnection&gt;</span> 
</code></pre>
</div>

<p>If you want to use a different MongoDB, change the setting for server address and port to match the new database. 
For example:</p>

<p><code class="highlighter-rouge">&lt;Server address="myMongodb_server" port="27017"/&gt;</code></p>

<p>Set the user name and password, if necessary, or leave blank:</p>

<p><code class="highlighter-rouge">&lt;User username="" password=""/&gt;</code></p>

<p>The MongoConnection element has attributes that describe the connection properties. These attributes are described in the following table:</p>

<table>
  <thead>
    <tr>
      <th>MongoConnection Attribute</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>poolSize</td>
      <td>Sets the maximum connection pool size for concurrent connections to MongoDB.  Most people will never come close to reaching the default limit of 200. If you experience problems with having too many concurrent connections open against the MongoDB, you might want to try lowering this value. The default is <code class="highlighter-rouge">poolSize="200"</code>.</td>
    </tr>
    <tr>
      <td>timeout  </td>
      <td>Specifies the maximum time to wait (in seconds) when the client is establishing a new connection to MongoDB.  In most cases, you won’t want to change this, as the default setting of 60 seconds should allow plenty of time. Default is <code class="highlighter-rouge">timeout="60"</code>.</td>
    </tr>
    <tr>
      <td>insertionRetries</td>
      <td>Specifies the number of times a failed insertion to MongoDB will be retried.  Retries are costly operations, so the number of attempts probably shouldn’t ever be set higher than the default (<code class="highlighter-rouge">insertionRetries="3"</code>).</td>
    </tr>
  </tbody>
</table>

            <!-- Footer -->
<footer>
    <div class="row">
        <hr class="footer-hr">
        <p>This site is open source. Suggestions and pull requests are welcome on our <a href="https://github.com/tableau/logshark">GitHub page</a>.</p>
        <p>&copy; 2016 Tableau.</p>
    </div>
</footer>

        </div>
    </div>
</body>

</html>
